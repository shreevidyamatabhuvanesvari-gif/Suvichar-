<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>सुविचार</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: linear-gradient(#0f2027, #203a43, #2c5364);
  font-family: "Noto Sans Devanagari", system-ui;
  color: #fff;
  overflow: hidden;
}

.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

#playBtn {
  padding: 14px 28px;
  font-size: 18px;
  border-radius: 30px;
  border: none;
  background: #ffd369;
  color: #000;
  cursor: pointer;
  margin-bottom: 20px;
}

#lines {
  position: absolute;
  bottom: 10%;
  width: 90%;
  text-align: center;
}

.line {
  opacity: 0.3;
  font-size: 18px;
  margin: 6px 0;
  transition: all 0.5s ease;
}

.line.active {
  opacity: 1;
  font-size: 22px;
  color: #ffd369;
}

.word.active {
  background: rgba(255,211,105,0.4);
  border-radius: 4px;
  padding: 2px 4px;
}
</style>
</head>

<body>
<div class="container">
  <button id="playBtn">▶️ सुनें</button>
  <div id="lines"></div>
</div>

<audio id="flute" src="flute.mp3" loop></audio>

<script>
/* ===============================
   SUVIHAR CONTENT (20 lines)
   =============================== */
const suvichar = [
  "शांत मन में ही सच्चा ज्ञान उतरता है",
  "शब्द नहीं भावना परिवर्तन लाती है",
  "जो स्वयं को समझ ले वही जगत को समझता है",
  "विचार बीज हैं कर्म उनका वृक्ष",
  "अहंकार ज्ञान का सबसे बड़ा शत्रु है",
  "मौन भी एक उत्तर होता है",
  "सत्य सरल होता है जटिल नहीं",
  "प्रेम सबसे बड़ा तर्क है",
  "जो सीखना छोड़ दे वही रुक जाता है",
  "धैर्य समय का सम्मान है",
  "चेतना का विस्तार ही विकास है",
  "भय अज्ञान से जन्म लेता है",
  "करुणा शक्ति की पहचान है",
  "स्वतंत्र विवेक ही मानवता है",
  "ज्ञान बांटने से बढ़ता है",
  "शब्दों से अधिक भाव बोलते हैं",
  "शांति सबसे बड़ी उपलब्धि है",
  "स्वयं से मित्रता सर्वोच्च साधना है",
  "जो समझ गया वही मुक्त हुआ",
  "अंत में प्रेम ही शेष रहता है"
];

/* ===============================
   DOM SETUP
   =============================== */
const linesDiv = document.getElementById("lines");
const playBtn = document.getElementById("playBtn");
const flute = document.getElementById("flute");

flute.volume = 0.18;

/* Render lines */
suvichar.forEach((text, i) => {
  const div = document.createElement("div");
  div.className = "line";
  div.id = "line-" + i;

  text.split(" ").forEach(word => {
    const span = document.createElement("span");
    span.textContent = word + " ";
    span.className = "word";
    div.appendChild(span);
  });

  linesDiv.appendChild(div);
});

/* ===============================
   SPEECH + HIGHLIGHT LOGIC
   =============================== */
async function speakLine(index) {
  if (index >= suvichar.length) {
    flute.pause();
    return;
  }

  document.querySelectorAll(".line").forEach(l => l.classList.remove("active"));
  const lineEl = document.getElementById("line-" + index);
  lineEl.classList.add("active");

  const words = lineEl.querySelectorAll(".word");
  words.forEach(w => w.classList.remove("active"));

  const utter = new SpeechSynthesisUtterance(suvichar[index]);
  utter.lang = "hi-IN";
  utter.rate = 0.9;     // human-like speed
  utter.pitch = 1.1;    // feminine tone

  const voices = speechSynthesis.getVoices();
  const female = voices.find(v => v.lang === "hi-IN");
  if (female) utter.voice = female;

  let wIndex = 0;
  utter.onboundary = e => {
    if (e.name === "word" && words[wIndex]) {
      words.forEach(w => w.classList.remove("active"));
      words[wIndex].classList.add("active");
      wIndex++;
    }
  };

  utter.onend = () => {
    setTimeout(() => speakLine(index + 1), 800); // pause after each line
  };

  speechSynthesis.speak(utter);
}

/* ===============================
   PLAY BUTTON
   =============================== */
playBtn.onclick = () => {
  speechSynthesis.cancel();
  flute.currentTime = 0;
  flute.play();
  speakLine(0);
};
</script>
</body>
</html>
